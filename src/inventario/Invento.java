/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package inventario;

import java.awt.Image;
import java.awt.Toolkit;
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.Arrays;
import java.util.Date;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JFileChooser;
import javax.swing.JOptionPane;
import javax.swing.filechooser.FileNameExtensionFilter;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author AULA1
 */
public class Invento extends javax.swing.JFrame {

    DefaultTableModel pproviders;
    DefaultTableModel cclients;
    DefaultTableModel iproduct;
    DefaultComboBoxModel modelproveedores;
    SimpleDateFormat formatear = new SimpleDateFormat("dd/MM/yy hh:mm a");
    boolean iunitvaluepoint = false, fvalorapagarpoint = false, fthereareitems = false, clientfound = false, pguionnit = false;
    DefaultTableModel items;
    Date localdate;
    int cantf = 0 , vendidos = 0;
    FileNameExtensionFilter filterfac = new FileNameExtensionFilter("Archivos de facturas (.fac)", "fac");
    FileNameExtensionFilter filterinv = new FileNameExtensionFilter("Archivos de inventarios (.inv)", "inv");

    public Invento() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jScrollPane3 = new javax.swing.JScrollPane();
        modelproviders = new javax.swing.JTable();
        scrollnada = new javax.swing.JScrollPane();
        modelclients = new javax.swing.JTable();
        jScrollPane4 = new javax.swing.JScrollPane();
        modelitems = new javax.swing.JTable();
        archivos = new javax.swing.JFileChooser();
        jTabbedPane1 = new javax.swing.JTabbedPane();
        providers = new javax.swing.JPanel();
        jPanel5 = new javax.swing.JPanel();
        jPanel8 = new javax.swing.JPanel();
        jLabel2 = new javax.swing.JLabel();
        jPanel6 = new javax.swing.JPanel();
        PLNombre = new javax.swing.JLabel();
        pnombres = new javax.swing.JTextField();
        PLApellidos = new javax.swing.JLabel();
        papellidos = new javax.swing.JTextField();
        PLDireccion = new javax.swing.JLabel();
        pdireccion = new javax.swing.JTextField();
        jPanel15 = new javax.swing.JPanel();
        astericoNI = new javax.swing.JLabel();
        PLNIToCedula = new javax.swing.JComboBox<>();
        pnitocedula = new javax.swing.JTextField();
        PLEmpresa = new javax.swing.JLabel();
        pempresa = new javax.swing.JTextField();
        PLTelefono = new javax.swing.JLabel();
        ptelefono = new javax.swing.JTextField();
        jPanel9 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jPanel7 = new javax.swing.JPanel();
        pregistrar = new javax.swing.JButton();
        clients = new javax.swing.JPanel();
        jPanel10 = new javax.swing.JPanel();
        jPanel11 = new javax.swing.JPanel();
        jLabel3 = new javax.swing.JLabel();
        jPanel12 = new javax.swing.JPanel();
        CLNombre = new javax.swing.JLabel();
        cnombres = new javax.swing.JTextField();
        CLApellidos = new javax.swing.JLabel();
        capellidos = new javax.swing.JTextField();
        CLDireccion = new javax.swing.JLabel();
        cdireccion = new javax.swing.JTextField();
        jLabel5 = new javax.swing.JLabel();
        ccedula = new javax.swing.JTextField();
        CLEmpresa = new javax.swing.JLabel();
        cempresa = new javax.swing.JTextField();
        CLTelefono = new javax.swing.JLabel();
        ctelefono = new javax.swing.JTextField();
        jPanel13 = new javax.swing.JPanel();
        jLabel4 = new javax.swing.JLabel();
        jPanel14 = new javax.swing.JPanel();
        cregistrar = new javax.swing.JButton();
        joinproducts = new javax.swing.JPanel();
        jPanel1 = new javax.swing.JPanel();
        jPanel17 = new javax.swing.JPanel();
        jLabel7 = new javax.swing.JLabel();
        jPanel18 = new javax.swing.JPanel();
        PLProducto = new javax.swing.JLabel();
        iproducto = new javax.swing.JTextField();
        PLCodigo = new javax.swing.JLabel();
        icodigo = new javax.swing.JTextField();
        PLProveedor = new javax.swing.JLabel();
        iproveedor = new javax.swing.JComboBox<>();
        PLFecha = new javax.swing.JLabel();
        ifechaingreso = new javax.swing.JSpinner();
        PLCantidad = new javax.swing.JLabel();
        icantidad = new javax.swing.JTextField();
        PLCaducidad = new javax.swing.JLabel();
        jPanel2 = new javax.swing.JPanel();
        icaducidad = new javax.swing.JSpinner();
        inotiene = new javax.swing.JComboBox<>();
        PLLote = new javax.swing.JLabel();
        ilote = new javax.swing.JTextField();
        PLClase = new javax.swing.JLabel();
        iclase = new javax.swing.JComboBox<>();
        PLINVIMA = new javax.swing.JLabel();
        iinvima = new javax.swing.JTextField();
        PLValUnit = new javax.swing.JLabel();
        ivalorunitario = new javax.swing.JTextField();
        PLiva = new javax.swing.JLabel();
        iiva = new javax.swing.JTextField();
        PLValTotal = new javax.swing.JLabel();
        ivalortotal = new javax.swing.JTextField();
        jPanel20 = new javax.swing.JPanel();
        jLabel8 = new javax.swing.JLabel();
        jPanel3 = new javax.swing.JPanel();
        iingresarproducto = new javax.swing.JButton();
        sellproducts = new javax.swing.JPanel();
        jPanel4 = new javax.swing.JPanel();
        jScrollPane2 = new javax.swing.JScrollPane();
        productos = new javax.swing.JTable();
        jPanel23 = new javax.swing.JPanel();
        jPanel37 = new javax.swing.JPanel();
        fagregar = new javax.swing.JButton();
        fquitar = new javax.swing.JButton();
        jPanel38 = new javax.swing.JPanel();
        FLBuscarItem = new javax.swing.JLabel();
        fbuscaritem = new javax.swing.JTextField();
        fbuscarproducto = new javax.swing.JButton();
        jPanel16 = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        factura = new javax.swing.JTable();
        jPanel28 = new javax.swing.JPanel();
        jPanel27 = new javax.swing.JPanel();
        FLIsAfiliated = new javax.swing.JLabel();
        fesafiliado = new javax.swing.JToggleButton();
        FLIDAfiliado = new javax.swing.JLabel();
        fidafiliado = new javax.swing.JTextField();
        fbuscar = new javax.swing.JButton();
        jLabel18 = new javax.swing.JLabel();
        jSeparator6 = new javax.swing.JSeparator();
        jLabel13 = new javax.swing.JLabel();
        jPanel31 = new javax.swing.JPanel();
        FLNameCliente = new javax.swing.JLabel();
        fnombrecliente = new javax.swing.JTextField();
        FLIDCliente = new javax.swing.JLabel();
        fidcliente = new javax.swing.JTextField();
        jPanel26 = new javax.swing.JPanel();
        jLabel6 = new javax.swing.JLabel();
        jPanel25 = new javax.swing.JPanel();
        jPanel19 = new javax.swing.JPanel();
        FLCantidad = new javax.swing.JLabel();
        fcantidad = new javax.swing.JTextField();
        FLLote = new javax.swing.JLabel();
        flote = new javax.swing.JTextField();
        FLClase = new javax.swing.JLabel();
        fclase = new javax.swing.JTextField();
        FLInvima = new javax.swing.JLabel();
        finvima = new javax.swing.JTextField();
        FLCaducidad = new javax.swing.JLabel();
        fcaducidad = new javax.swing.JTextField();
        fcalcular = new javax.swing.JButton();
        jLabel10 = new javax.swing.JLabel();
        jSeparator3 = new javax.swing.JSeparator();
        jLabel11 = new javax.swing.JLabel();
        jPanel21 = new javax.swing.JPanel();
        jPanel22 = new javax.swing.JPanel();
        jPanel29 = new javax.swing.JPanel();
        FLSubtotal = new javax.swing.JLabel();
        jPanel33 = new javax.swing.JPanel();
        fsymbol1 = new javax.swing.JLabel();
        fsubtotal = new javax.swing.JLabel();
        FLIVA = new javax.swing.JLabel();
        jPanel34 = new javax.swing.JPanel();
        fsymbol2 = new javax.swing.JLabel();
        fiva = new javax.swing.JLabel();
        FLDescuento = new javax.swing.JLabel();
        jPanel35 = new javax.swing.JPanel();
        fsymbol3 = new javax.swing.JLabel();
        fdescuento = new javax.swing.JLabel();
        fsymbol5 = new javax.swing.JLabel();
        fdescuento1 = new javax.swing.JLabel();
        FLValTotal = new javax.swing.JLabel();
        jPanel36 = new javax.swing.JPanel();
        fsymbol4 = new javax.swing.JLabel();
        fvalortotal = new javax.swing.JLabel();
        jLabel12 = new javax.swing.JLabel();
        jSeparator4 = new javax.swing.JSeparator();
        jPanel30 = new javax.swing.JPanel();
        FLValPagar = new javax.swing.JLabel();
        fvalorapagar = new javax.swing.JTextField();
        FLResiduo = new javax.swing.JLabel();
        fresiduo = new javax.swing.JTextField();
        jPanel24 = new javax.swing.JPanel();
        ffacturar = new javax.swing.JButton();
        fcancelar = new javax.swing.JButton();
        jLabel9 = new javax.swing.JLabel();
        jMenuBar1 = new javax.swing.JMenuBar();
        jMenu1 = new javax.swing.JMenu();
        news = new javax.swing.JMenuItem();
        jSeparator2 = new javax.swing.JPopupMenu.Separator();
        open = new javax.swing.JMenuItem();
        save = new javax.swing.JMenuItem();
        jSeparator1 = new javax.swing.JPopupMenu.Separator();
        exit = new javax.swing.JMenuItem();
        jMenu2 = new javax.swing.JMenu();
        editproviders = new javax.swing.JMenuItem();
        editclients = new javax.swing.JMenuItem();
        editproducts = new javax.swing.JMenuItem();

        modelproviders.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "NIT/Cédula", "Nombre", "Apellidos", "Dirección/Dirección de empresa", "Empresa", "Teléfono"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jScrollPane3.setViewportView(modelproviders);
        if (modelproviders.getColumnModel().getColumnCount() > 0) {
            modelproviders.getColumnModel().getColumn(0).setResizable(false);
            modelproviders.getColumnModel().getColumn(1).setResizable(false);
            modelproviders.getColumnModel().getColumn(2).setResizable(false);
            modelproviders.getColumnModel().getColumn(3).setResizable(false);
            modelproviders.getColumnModel().getColumn(4).setResizable(false);
            modelproviders.getColumnModel().getColumn(5).setResizable(false);
        }

        modelclients.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Cédula", "Nombre", "Apellidos", "Dirección", "Lugar de trabajo", "Teléfono"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        scrollnada.setViewportView(modelclients);
        if (modelclients.getColumnModel().getColumnCount() > 0) {
            modelclients.getColumnModel().getColumn(0).setResizable(false);
            modelclients.getColumnModel().getColumn(1).setResizable(false);
            modelclients.getColumnModel().getColumn(2).setResizable(false);
            modelclients.getColumnModel().getColumn(3).setResizable(false);
            modelclients.getColumnModel().getColumn(4).setResizable(false);
            modelclients.getColumnModel().getColumn(5).setResizable(false);
        }

        modelitems.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Código", "Nombre del producto", "Cantidad", "Proveedor", "Fecha y hora de ingreso", "Fecha de caducidad", "Lote", "Clase de producto", "INVIMA", "Valor unitario", "IVA", "Valor total"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false, false, false, false, false, false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jScrollPane4.setViewportView(modelitems);
        if (modelitems.getColumnModel().getColumnCount() > 0) {
            modelitems.getColumnModel().getColumn(0).setResizable(false);
            modelitems.getColumnModel().getColumn(1).setResizable(false);
            modelitems.getColumnModel().getColumn(2).setResizable(false);
            modelitems.getColumnModel().getColumn(3).setResizable(false);
            modelitems.getColumnModel().getColumn(4).setResizable(false);
            modelitems.getColumnModel().getColumn(5).setResizable(false);
            modelitems.getColumnModel().getColumn(6).setResizable(false);
            modelitems.getColumnModel().getColumn(7).setResizable(false);
            modelitems.getColumnModel().getColumn(8).setResizable(false);
            modelitems.getColumnModel().getColumn(9).setResizable(false);
            modelitems.getColumnModel().getColumn(10).setResizable(false);
            modelitems.getColumnModel().getColumn(11).setResizable(false);
        }

        archivos.setDialogTitle("");
        archivos.addChoosableFileFilter(filterinv);
        archivos.addChoosableFileFilter(filterfac);

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Moglog");
        setName("inventarios"); // NOI18N
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowOpened(java.awt.event.WindowEvent evt) {
                formWindowOpened(evt);
            }
        });
        getContentPane().setLayout(new java.awt.GridLayout(1, 0));

        providers.setLayout(new java.awt.BorderLayout());

        jPanel5.setBorder(javax.swing.BorderFactory.createTitledBorder("Datos de proveedor"));
        jPanel5.setLayout(new javax.swing.BoxLayout(jPanel5, javax.swing.BoxLayout.LINE_AXIS));

        jPanel8.setLayout(new javax.swing.BoxLayout(jPanel8, javax.swing.BoxLayout.LINE_AXIS));

        jLabel2.setText("                ");
        jPanel8.add(jLabel2);

        jPanel5.add(jPanel8);

        jPanel6.setLayout(new java.awt.GridLayout(6, 2, 25, 85));

        PLNombre.setText("*Nombres:");
        jPanel6.add(PLNombre);

        pnombres.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                pnombresKeyTyped(evt);
            }
        });
        jPanel6.add(pnombres);

        PLApellidos.setText("*Apellidos:");
        jPanel6.add(PLApellidos);

        papellidos.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                papellidosKeyTyped(evt);
            }
        });
        jPanel6.add(papellidos);

        PLDireccion.setText("*Dirección de la empresa:");
        jPanel6.add(PLDireccion);

        pdireccion.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                pdireccionKeyTyped(evt);
            }
        });
        jPanel6.add(pdireccion);

        jPanel15.setLayout(new javax.swing.BoxLayout(jPanel15, javax.swing.BoxLayout.LINE_AXIS));

        astericoNI.setText("*");
        jPanel15.add(astericoNI);

        PLNIToCedula.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "NIT", "Cédula" }));
        PLNIToCedula.setBorder(null);
        PLNIToCedula.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                PLNIToCedulaActionPerformed(evt);
            }
        });
        jPanel15.add(PLNIToCedula);

        jPanel6.add(jPanel15);

        pnitocedula.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                pnitocedulaKeyPressed(evt);
            }
            public void keyTyped(java.awt.event.KeyEvent evt) {
                pnitocedulaKeyTyped(evt);
            }
        });
        jPanel6.add(pnitocedula);

        PLEmpresa.setText("*Empresa:");
        jPanel6.add(PLEmpresa);

        pempresa.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                pempresaKeyTyped(evt);
            }
        });
        jPanel6.add(pempresa);

        PLTelefono.setText("*Teléfono:");
        jPanel6.add(PLTelefono);

        ptelefono.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                ptelefonoKeyTyped(evt);
            }
        });
        jPanel6.add(ptelefono);

        jPanel5.add(jPanel6);

        jPanel9.setLayout(new javax.swing.BoxLayout(jPanel9, javax.swing.BoxLayout.LINE_AXIS));

        jLabel1.setText("                ");
        jPanel9.add(jLabel1);

        jPanel5.add(jPanel9);

        providers.add(jPanel5, java.awt.BorderLayout.CENTER);

        jPanel7.setLayout(new java.awt.GridLayout(1, 0));

        pregistrar.setText("Registrar");
        pregistrar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                pregistrarActionPerformed(evt);
            }
        });
        jPanel7.add(pregistrar);

        providers.add(jPanel7, java.awt.BorderLayout.PAGE_END);

        jTabbedPane1.addTab("Proveedores", providers);

        clients.setLayout(new java.awt.BorderLayout());

        jPanel10.setBorder(javax.swing.BorderFactory.createTitledBorder("Datos de cliente"));
        jPanel10.setLayout(new javax.swing.BoxLayout(jPanel10, javax.swing.BoxLayout.LINE_AXIS));

        jPanel11.setLayout(new javax.swing.BoxLayout(jPanel11, javax.swing.BoxLayout.LINE_AXIS));

        jLabel3.setText("                ");
        jPanel11.add(jLabel3);

        jPanel10.add(jPanel11);

        jPanel12.setLayout(new java.awt.GridLayout(6, 2, 25, 85));

        CLNombre.setText("*Nombres:");
        jPanel12.add(CLNombre);

        cnombres.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                cnombresKeyTyped(evt);
            }
        });
        jPanel12.add(cnombres);

        CLApellidos.setText("*Apellidos:");
        jPanel12.add(CLApellidos);

        capellidos.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                capellidosKeyTyped(evt);
            }
        });
        jPanel12.add(capellidos);

        CLDireccion.setText("*Dirección:");
        jPanel12.add(CLDireccion);

        cdireccion.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                cdireccionKeyTyped(evt);
            }
        });
        jPanel12.add(cdireccion);

        jLabel5.setText("*Cédula:");
        jPanel12.add(jLabel5);

        ccedula.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                ccedulaKeyTyped(evt);
            }
        });
        jPanel12.add(ccedula);

        CLEmpresa.setText("Lugar de trabajo:");
        jPanel12.add(CLEmpresa);

        cempresa.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                cempresaKeyTyped(evt);
            }
        });
        jPanel12.add(cempresa);

        CLTelefono.setText("*Teléfono:");
        jPanel12.add(CLTelefono);

        ctelefono.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                ctelefonoKeyTyped(evt);
            }
        });
        jPanel12.add(ctelefono);

        jPanel10.add(jPanel12);

        jPanel13.setLayout(new javax.swing.BoxLayout(jPanel13, javax.swing.BoxLayout.LINE_AXIS));

        jLabel4.setText("                ");
        jPanel13.add(jLabel4);

        jPanel10.add(jPanel13);

        clients.add(jPanel10, java.awt.BorderLayout.CENTER);

        jPanel14.setLayout(new java.awt.GridLayout(1, 0));

        cregistrar.setText("Registrar");
        cregistrar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cregistrarActionPerformed(evt);
            }
        });
        jPanel14.add(cregistrar);

        clients.add(jPanel14, java.awt.BorderLayout.PAGE_END);

        jTabbedPane1.addTab("Clientes", clients);

        joinproducts.setBorder(javax.swing.BorderFactory.createTitledBorder("Datos del producto"));
        joinproducts.setLayout(new java.awt.BorderLayout());

        jPanel1.setLayout(new javax.swing.BoxLayout(jPanel1, javax.swing.BoxLayout.LINE_AXIS));

        jPanel17.setLayout(new javax.swing.BoxLayout(jPanel17, javax.swing.BoxLayout.LINE_AXIS));

        jLabel7.setText("                ");
        jPanel17.add(jLabel7);

        jPanel1.add(jPanel17);

        jPanel18.setLayout(new java.awt.GridLayout(12, 2, 0, 25));

        PLProducto.setText("*Nombre del producto:");
        jPanel18.add(PLProducto);

        iproducto.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                iproductoKeyTyped(evt);
            }
        });
        jPanel18.add(iproducto);

        PLCodigo.setText("*Código:");
        jPanel18.add(PLCodigo);

        icodigo.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                icodigoKeyTyped(evt);
            }
        });
        jPanel18.add(icodigo);

        PLProveedor.setText("*Proveedor:");
        jPanel18.add(PLProveedor);

        jPanel18.add(iproveedor);

        PLFecha.setText("*Fecha y hora de ingreso:");
        jPanel18.add(PLFecha);

        ifechaingreso.setModel(new javax.swing.SpinnerDateModel(new java.util.Date(), new java.util.Date(1167627600000L), new java.util.Date(2114398800000L), java.util.Calendar.DAY_OF_MONTH));
        jPanel18.add(ifechaingreso);

        PLCantidad.setText("*Cantidad:");
        jPanel18.add(PLCantidad);

        icantidad.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                icantidadKeyPressed(evt);
            }
            public void keyTyped(java.awt.event.KeyEvent evt) {
                icantidadKeyTyped(evt);
            }
        });
        jPanel18.add(icantidad);

        PLCaducidad.setText("*Fecha de caducidad:");
        jPanel18.add(PLCaducidad);

        jPanel2.setLayout(new java.awt.GridLayout(1, 0, 10, 0));

        icaducidad.setModel(new javax.swing.SpinnerDateModel(new java.util.Date(), new java.util.Date(1483246800000L), new java.util.Date(2114398800000L), java.util.Calendar.DAY_OF_MONTH));
        jPanel2.add(icaducidad);

        inotiene.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "                ", "Ninguna" }));
        inotiene.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                inotieneActionPerformed(evt);
            }
        });
        jPanel2.add(inotiene);

        jPanel18.add(jPanel2);

        PLLote.setText("*Lote:");
        jPanel18.add(PLLote);

        ilote.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                iloteKeyTyped(evt);
            }
        });
        jPanel18.add(ilote);

        PLClase.setText("*Clase de producto:");
        jPanel18.add(PLClase);

        iclase.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Productos de aseo personal", "Productos de aseo para el hogar", "Medicamentos" }));
        jPanel18.add(iclase);

        PLINVIMA.setText("*Registro sanitario:");
        jPanel18.add(PLINVIMA);

        iinvima.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                iinvimaKeyTyped(evt);
            }
        });
        jPanel18.add(iinvima);

        PLValUnit.setText("*Valor unitario:");
        jPanel18.add(PLValUnit);

        ivalorunitario.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                ivalorunitarioKeyPressed(evt);
            }
            public void keyTyped(java.awt.event.KeyEvent evt) {
                ivalorunitarioKeyTyped(evt);
            }
        });
        jPanel18.add(ivalorunitario);

        PLiva.setText("IVA:");
        jPanel18.add(PLiva);

        iiva.setEnabled(false);
        iiva.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                iivaKeyTyped(evt);
            }
        });
        jPanel18.add(iiva);

        PLValTotal.setText("Valor total:");
        jPanel18.add(PLValTotal);

        ivalortotal.setEnabled(false);
        jPanel18.add(ivalortotal);

        jPanel1.add(jPanel18);

        jPanel20.setLayout(new javax.swing.BoxLayout(jPanel20, javax.swing.BoxLayout.LINE_AXIS));

        jLabel8.setText("                ");
        jPanel20.add(jLabel8);

        jPanel1.add(jPanel20);

        joinproducts.add(jPanel1, java.awt.BorderLayout.CENTER);

        jPanel3.setLayout(new java.awt.GridLayout(1, 0));

        iingresarproducto.setText("Ingresar producto al inventario");
        iingresarproducto.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                iingresarproductoActionPerformed(evt);
            }
        });
        jPanel3.add(iingresarproducto);

        joinproducts.add(jPanel3, java.awt.BorderLayout.PAGE_END);

        jTabbedPane1.addTab("Compra de productos", joinproducts);

        sellproducts.setLayout(new java.awt.GridLayout(3, 1));

        jPanel4.setBorder(javax.swing.BorderFactory.createTitledBorder("Productos"));
        jPanel4.setLayout(new java.awt.BorderLayout());

        productos.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Código", "Nombre", "Cantidad", "Valor unitario", "IVA"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jScrollPane2.setViewportView(productos);
        if (productos.getColumnModel().getColumnCount() > 0) {
            productos.getColumnModel().getColumn(0).setResizable(false);
            productos.getColumnModel().getColumn(1).setResizable(false);
            productos.getColumnModel().getColumn(2).setResizable(false);
            productos.getColumnModel().getColumn(3).setResizable(false);
            productos.getColumnModel().getColumn(4).setResizable(false);
        }

        jPanel4.add(jScrollPane2, java.awt.BorderLayout.CENTER);

        jPanel23.setLayout(new javax.swing.BoxLayout(jPanel23, javax.swing.BoxLayout.LINE_AXIS));

        fagregar.setText("Agregar");
        fagregar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                fagregarActionPerformed(evt);
            }
        });
        jPanel37.add(fagregar);

        fquitar.setText("Quitar");
        fquitar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                fquitarActionPerformed(evt);
            }
        });
        jPanel37.add(fquitar);

        jPanel23.add(jPanel37);

        jPanel38.setLayout(new java.awt.GridLayout(1, 0));

        FLBuscarItem.setText("Buscar por código:");
        jPanel38.add(FLBuscarItem);

        fbuscaritem.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                fbuscaritemKeyTyped(evt);
            }
        });
        jPanel38.add(fbuscaritem);

        fbuscarproducto.setText("Buscar");
        fbuscarproducto.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                fbuscarproductoActionPerformed(evt);
            }
        });
        jPanel38.add(fbuscarproducto);

        jPanel23.add(jPanel38);

        jPanel4.add(jPanel23, java.awt.BorderLayout.PAGE_END);

        sellproducts.add(jPanel4);

        jPanel16.setBorder(javax.swing.BorderFactory.createTitledBorder("Añadidos a la cesta"));
        jPanel16.setLayout(new java.awt.BorderLayout());

        factura.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Código", "Nombre", "Cantidad", "Valor unitario", "Valor total"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        factura.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                facturaMouseClicked(evt);
            }
        });
        jScrollPane1.setViewportView(factura);
        if (factura.getColumnModel().getColumnCount() > 0) {
            factura.getColumnModel().getColumn(0).setResizable(false);
            factura.getColumnModel().getColumn(1).setResizable(false);
            factura.getColumnModel().getColumn(2).setResizable(false);
            factura.getColumnModel().getColumn(3).setResizable(false);
            factura.getColumnModel().getColumn(4).setResizable(false);
        }

        jPanel16.add(jScrollPane1, java.awt.BorderLayout.CENTER);

        jPanel28.setBorder(javax.swing.BorderFactory.createTitledBorder("Datos del cliente"));
        jPanel28.setLayout(new javax.swing.BoxLayout(jPanel28, javax.swing.BoxLayout.Y_AXIS));

        jPanel27.setLayout(new java.awt.GridLayout(1, 0, 10, 0));

        FLIsAfiliated.setText("¿Es afiliado?:                    ");
        jPanel27.add(FLIsAfiliated);

        fesafiliado.setText("NO");
        fesafiliado.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                fesafiliadoActionPerformed(evt);
            }
        });
        jPanel27.add(fesafiliado);

        FLIDAfiliado.setText("*Cédula del afiliado:    ");
        FLIDAfiliado.setEnabled(false);
        jPanel27.add(FLIDAfiliado);

        fidafiliado.setEnabled(false);
        fidafiliado.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                fidafiliadoKeyTyped(evt);
            }
        });
        jPanel27.add(fidafiliado);

        fbuscar.setText("Buscar");
        fbuscar.setEnabled(false);
        fbuscar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                fbuscarActionPerformed(evt);
            }
        });
        jPanel27.add(fbuscar);

        jPanel28.add(jPanel27);

        jLabel18.setFont(new java.awt.Font("Tahoma", 0, 3)); // NOI18N
        jLabel18.setText(" ");
        jPanel28.add(jLabel18);
        jPanel28.add(jSeparator6);

        jLabel13.setFont(new java.awt.Font("Tahoma", 0, 3)); // NOI18N
        jLabel13.setText(" ");
        jPanel28.add(jLabel13);

        jPanel31.setLayout(new java.awt.GridLayout(1, 0, 10, 0));

        FLNameCliente.setText("*Nombre del cliente:");
        jPanel31.add(FLNameCliente);

        fnombrecliente.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                fnombreclienteKeyTyped(evt);
            }
        });
        jPanel31.add(fnombrecliente);

        FLIDCliente.setText("*Cédula: ");
        jPanel31.add(FLIDCliente);

        fidcliente.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                fidclienteKeyTyped(evt);
            }
        });
        jPanel31.add(fidcliente);

        jPanel28.add(jPanel31);

        jPanel16.add(jPanel28, java.awt.BorderLayout.PAGE_END);

        sellproducts.add(jPanel16);

        jPanel26.setLayout(new javax.swing.BoxLayout(jPanel26, javax.swing.BoxLayout.LINE_AXIS));

        jLabel6.setText("                 ");
        jPanel26.add(jLabel6);

        jPanel25.setLayout(new javax.swing.BoxLayout(jPanel25, javax.swing.BoxLayout.X_AXIS));

        jPanel19.setBorder(javax.swing.BorderFactory.createTitledBorder("Datos del producto"));
        jPanel19.setLayout(new java.awt.GridLayout(6, 2, 5, 5));

        FLCantidad.setText("Cantidad:");
        jPanel19.add(FLCantidad);

        fcantidad.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                fcantidadKeyPressed(evt);
            }
            public void keyTyped(java.awt.event.KeyEvent evt) {
                fcantidadKeyTyped(evt);
            }
        });
        jPanel19.add(fcantidad);

        FLLote.setText("Lote:");
        jPanel19.add(FLLote);

        flote.setEnabled(false);
        jPanel19.add(flote);

        FLClase.setText("Clase de producto:");
        jPanel19.add(FLClase);

        fclase.setEnabled(false);
        jPanel19.add(fclase);

        FLInvima.setText("Registro sanitario:");
        jPanel19.add(FLInvima);

        finvima.setEnabled(false);
        jPanel19.add(finvima);

        FLCaducidad.setText("Fecha de caducidad:");
        jPanel19.add(FLCaducidad);

        fcaducidad.setEnabled(false);
        jPanel19.add(fcaducidad);

        fcalcular.setText("Calcular");
        fcalcular.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                fcalcularActionPerformed(evt);
            }
        });
        jPanel19.add(fcalcular);

        jPanel25.add(jPanel19);

        jLabel10.setText(" ");
        jPanel25.add(jLabel10);

        jSeparator3.setOrientation(javax.swing.SwingConstants.VERTICAL);
        jPanel25.add(jSeparator3);

        jLabel11.setText(" ");
        jPanel25.add(jLabel11);

        jPanel21.setBorder(javax.swing.BorderFactory.createTitledBorder("Cómputo"));
        jPanel21.setLayout(new java.awt.BorderLayout());

        jPanel22.setLayout(new javax.swing.BoxLayout(jPanel22, javax.swing.BoxLayout.Y_AXIS));

        jPanel29.setLayout(new java.awt.GridLayout(4, 2));

        FLSubtotal.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        FLSubtotal.setText("Sub total:");
        jPanel29.add(FLSubtotal);

        jPanel33.setLayout(new javax.swing.BoxLayout(jPanel33, javax.swing.BoxLayout.LINE_AXIS));

        fsymbol1.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        fsymbol1.setForeground(new java.awt.Color(0, 153, 0));
        fsymbol1.setText("$");
        jPanel33.add(fsymbol1);

        fsubtotal.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        fsubtotal.setForeground(new java.awt.Color(0, 153, 0));
        fsubtotal.setText("0");
        jPanel33.add(fsubtotal);

        jPanel29.add(jPanel33);

        FLIVA.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        FLIVA.setText("IVA:");
        jPanel29.add(FLIVA);

        jPanel34.setLayout(new javax.swing.BoxLayout(jPanel34, javax.swing.BoxLayout.LINE_AXIS));

        fsymbol2.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        fsymbol2.setForeground(new java.awt.Color(0, 0, 255));
        fsymbol2.setText("$");
        jPanel34.add(fsymbol2);

        fiva.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        fiva.setForeground(new java.awt.Color(0, 0, 255));
        fiva.setText("0");
        jPanel34.add(fiva);

        jPanel29.add(jPanel34);

        FLDescuento.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        FLDescuento.setText("Descuento:");
        jPanel29.add(FLDescuento);

        jPanel35.setLayout(new javax.swing.BoxLayout(jPanel35, javax.swing.BoxLayout.LINE_AXIS));

        fsymbol3.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        fsymbol3.setForeground(new java.awt.Color(153, 153, 0));
        fsymbol3.setText("$");
        jPanel35.add(fsymbol3);

        fdescuento.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        fdescuento.setForeground(new java.awt.Color(153, 153, 0));
        fdescuento.setText("0");
        jPanel35.add(fdescuento);

        fsymbol5.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        fsymbol5.setForeground(new java.awt.Color(153, 153, 0));
        jPanel35.add(fsymbol5);

        fdescuento1.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        fdescuento1.setForeground(new java.awt.Color(153, 153, 0));
        jPanel35.add(fdescuento1);

        jPanel29.add(jPanel35);

        FLValTotal.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        FLValTotal.setText("Valor Total:");
        jPanel29.add(FLValTotal);

        jPanel36.setLayout(new javax.swing.BoxLayout(jPanel36, javax.swing.BoxLayout.LINE_AXIS));

        fsymbol4.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        fsymbol4.setForeground(new java.awt.Color(255, 0, 0));
        fsymbol4.setText("$");
        jPanel36.add(fsymbol4);

        fvalortotal.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        fvalortotal.setForeground(new java.awt.Color(255, 0, 0));
        fvalortotal.setText("0");
        jPanel36.add(fvalortotal);

        jPanel29.add(jPanel36);

        jPanel22.add(jPanel29);

        jLabel12.setFont(new java.awt.Font("Tahoma", 0, 3)); // NOI18N
        jLabel12.setText(" ");
        jPanel22.add(jLabel12);
        jPanel22.add(jSeparator4);

        jPanel30.setLayout(new java.awt.GridLayout(2, 2));

        FLValPagar.setText("Valor a pagar:");
        FLValPagar.setEnabled(false);
        jPanel30.add(FLValPagar);

        fvalorapagar.setEnabled(false);
        fvalorapagar.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                fvalorapagarKeyPressed(evt);
            }
            public void keyTyped(java.awt.event.KeyEvent evt) {
                fvalorapagarKeyTyped(evt);
            }
        });
        jPanel30.add(fvalorapagar);

        FLResiduo.setText("Residuo:");
        FLResiduo.setEnabled(false);
        jPanel30.add(FLResiduo);

        fresiduo.setEnabled(false);
        jPanel30.add(fresiduo);

        jPanel22.add(jPanel30);

        jPanel21.add(jPanel22, java.awt.BorderLayout.CENTER);

        jPanel24.setLayout(new java.awt.GridLayout(1, 0));

        ffacturar.setText("Facturar");
        ffacturar.setEnabled(false);
        ffacturar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ffacturarActionPerformed(evt);
            }
        });
        jPanel24.add(ffacturar);

        fcancelar.setText("Cancelar");
        fcancelar.setEnabled(false);
        fcancelar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                fcancelarActionPerformed(evt);
            }
        });
        jPanel24.add(fcancelar);

        jPanel21.add(jPanel24, java.awt.BorderLayout.PAGE_END);

        jPanel25.add(jPanel21);

        jPanel26.add(jPanel25);

        jLabel9.setText("                 ");
        jPanel26.add(jLabel9);

        sellproducts.add(jPanel26);

        jTabbedPane1.addTab("Facturación", sellproducts);

        getContentPane().add(jTabbedPane1);

        jMenu1.setText("Inicio");

        news.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_N, java.awt.event.InputEvent.CTRL_MASK));
        news.setText("Nuevo");
        news.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                newsActionPerformed(evt);
            }
        });
        jMenu1.add(news);
        jMenu1.add(jSeparator2);

        open.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_O, java.awt.event.InputEvent.CTRL_MASK));
        open.setText("Abrir");
        open.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                openActionPerformed(evt);
            }
        });
        jMenu1.add(open);

        save.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_G, java.awt.event.InputEvent.CTRL_MASK));
        save.setText("Guardar inventario");
        save.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                saveActionPerformed(evt);
            }
        });
        jMenu1.add(save);
        jMenu1.add(jSeparator1);

        exit.setText("Salir");
        exit.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                exitActionPerformed(evt);
            }
        });
        jMenu1.add(exit);

        jMenuBar1.add(jMenu1);

        jMenu2.setText("Editar");

        editproviders.setText("Modificar proveedores");
        editproviders.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                editprovidersActionPerformed(evt);
            }
        });
        jMenu2.add(editproviders);

        editclients.setText("Modificar clientes");
        editclients.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                editclientsActionPerformed(evt);
            }
        });
        jMenu2.add(editclients);

        editproducts.setText("Modificar productos");
        editproducts.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                editproductsActionPerformed(evt);
            }
        });
        jMenu2.add(editproducts);

        jMenuBar1.add(jMenu2);

        setJMenuBar(jMenuBar1);

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void newsActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_newsActionPerformed
        this.dispose();
        java.awt.EventQueue.invokeLater(() -> {
                Invento main = new Invento();
                main.setExtendedState(MAXIMIZED_BOTH);
                main.setVisible(true);
            });
    }//GEN-LAST:event_newsActionPerformed

    private void exitActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_exitActionPerformed
        System.exit(0);
    }//GEN-LAST:event_exitActionPerformed

    private void PLNIToCedulaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_PLNIToCedulaActionPerformed
        if (PLNIToCedula.getSelectedItem().equals("Cédula")) {
            PLEmpresa.setEnabled(false);
            pempresa.setEnabled(false);
            PLDireccion.setText("*Dirección:");
        } else if (PLNIToCedula.getSelectedItem().equals("NIT")) {
            PLEmpresa.setEnabled(true);
            pempresa.setEnabled(true);
            PLDireccion.setText("*Dirección de la empresa:");
        }
    }//GEN-LAST:event_PLNIToCedulaActionPerformed

    private void pnombresKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_pnombresKeyTyped
        if (Character.isDigit(evt.getKeyChar()) || pnombres.getText().length() >= 30) {
            evt.consume();
        }
    }//GEN-LAST:event_pnombresKeyTyped

    private void papellidosKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_papellidosKeyTyped
        if (Character.isDigit(evt.getKeyChar()) || papellidos.getText().length() >= 30) {
            evt.consume();
        }
    }//GEN-LAST:event_papellidosKeyTyped

    private void pnitocedulaKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_pnitocedulaKeyTyped
        if (!Character.isDigit(evt.getKeyChar()) || pnitocedula.getText().length() >= 12) {
            evt.consume();
        }
    }//GEN-LAST:event_pnitocedulaKeyTyped

    private void ptelefonoKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_ptelefonoKeyTyped
        if (!Character.isDigit(evt.getKeyChar()) || ptelefono.getText().length() >= 10) {
            evt.consume();
        }
    }//GEN-LAST:event_ptelefonoKeyTyped

    private void cnombresKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_cnombresKeyTyped
        if (Character.isDigit(evt.getKeyChar()) || cnombres.getText().length() >= 30) {
            evt.consume();
        }
    }//GEN-LAST:event_cnombresKeyTyped

    private void capellidosKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_capellidosKeyTyped
        if (Character.isDigit(evt.getKeyChar()) || capellidos.getText().length() >= 30) {
            evt.consume();
        }
    }//GEN-LAST:event_capellidosKeyTyped

    private void ccedulaKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_ccedulaKeyTyped
        if (!Character.isDigit(evt.getKeyChar()) || ccedula.getText().length() >= 12) {
            evt.consume();
        }
    }//GEN-LAST:event_ccedulaKeyTyped

    private void ctelefonoKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_ctelefonoKeyTyped
        if (!Character.isDigit(evt.getKeyChar()) || ctelefono.getText().length() >= 10) {
            evt.consume();
        }
    }//GEN-LAST:event_ctelefonoKeyTyped

    private void pregistrarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_pregistrarActionPerformed
        if (PLNIToCedula.getSelectedItem().equals("Cédula")) {
            if (pnombres.getText() != null && !"".equals(pnombres.getText()) && papellidos.getText() != null && !"".equals(papellidos.getText()) && pdireccion.getText() != null && !"".equals(pdireccion.getText()) && pnitocedula.getText() != null && !"".equals(pnitocedula.getText()) && ptelefono.getText() != null && !"".equals(ptelefono.getText())) {
                Object[] ppreproviders = {pnitocedula.getText(), pnombres.getText(), papellidos.getText(), pdireccion.getText(), pempresa.getText(), ptelefono.getText()};
                pproviders = (DefaultTableModel) modelproviders.getModel();
                pproviders.addRow(ppreproviders);
                modelproveedores = (DefaultComboBoxModel) iproveedor.getModel();

                modelproveedores.addElement("Cédula: " + pnitocedula.getText() + " - " + pnombres.getText() + " " + papellidos.getText());
                iproveedor.setModel(modelproveedores);
                proveedorRegistrado();
                joinproducts.setEnabled(true);
            } else {
                JOptionPane.showMessageDialog(null, "Por favor, digite todos los campos requeridos (*).", "Incompleto", JOptionPane.WARNING_MESSAGE);
            }
        } else if (PLNIToCedula.getSelectedItem().equals("NIT")) {
            if (pnombres.getText() != null && !"".equals(pnombres.getText()) && papellidos.getText() != null && !"".equals(papellidos.getText()) && pdireccion.getText() != null && !"".equals(pdireccion.getText()) && pnitocedula.getText() != null && !"".equals(pnitocedula.getText()) && ptelefono.getText() != null && !"".equals(ptelefono.getText()) && pempresa.getText() != null && !"".equals(pempresa.getText()) && pguionnit) {
                Object[] ppreproviders = {pnitocedula.getText(), pnombres.getText(), papellidos.getText(), pdireccion.getText(), pempresa.getText(), ptelefono.getText()};
                pproviders = (DefaultTableModel) modelproviders.getModel();
                pproviders.addRow(ppreproviders);
                modelproveedores = (DefaultComboBoxModel) iproveedor.getModel();

                modelproveedores.addElement("NIT: " + pnitocedula.getText() + " - " + pempresa.getText() + " - " + pnombres.getText() + " " + papellidos.getText());
                iproveedor.setModel(modelproveedores);
                proveedorRegistrado();
                joinproducts.setEnabled(true);
            } else {
                JOptionPane.showMessageDialog(null, "Por favor, digite todos los campos requeridos (*)\nDigite correctamente el campo de NIT.", "Incompleto o incorrecto", JOptionPane.WARNING_MESSAGE);
            }
        }

    }//GEN-LAST:event_pregistrarActionPerformed

    private void cregistrarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cregistrarActionPerformed
        if (cnombres.getText() != null && !"".equals(cnombres.getText()) && capellidos.getText() != null && !"".equals(capellidos.getText()) && cdireccion.getText() != null && !"".equals(cdireccion.getText()) && ccedula.getText() != null && !"".equals(ccedula.getText()) && ctelefono.getText() != null && !"".equals(ctelefono.getText())) {
            Object[] cpreclients = {ccedula.getText(), cnombres.getText(), capellidos.getText(), cdireccion.getText(), cempresa.getText(), ctelefono.getText()};
            cclients = (DefaultTableModel) modelclients.getModel();
            cclients.addRow(cpreclients);
            clienteRegistrado();
        } else {
            JOptionPane.showMessageDialog(null, "Por favor, digite todos los campos requeridos (*).", "Incompleto", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_cregistrarActionPerformed

    private void iingresarproductoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_iingresarproductoActionPerformed
        char[] iverfyunitvalue;
        boolean iscoderepeat = false;
        iverfyunitvalue = ivalorunitario.getText().toCharArray();

        if (iproducto.getText() != null && !"".equals(iproducto.getText()) && icodigo.getText() != null && !"".equals(icodigo.getText()) && iinvima.getText() != null && !"".equals(iinvima.getText()) && ivalorunitario.getText() != null && !"".equals(ivalorunitario.getText())) {
            if (iverfyunitvalue[iverfyunitvalue.length - 1] == '.') {
                JOptionPane.showMessageDialog(null, "Por favor, complete correctamente el campo de valor unitario.", "Punto decimal", JOptionPane.WARNING_MESSAGE);
            } else {
                try {
                    iproduct = (DefaultTableModel) modelitems.getModel();
                    for (int i = 0; i < iproduct.getRowCount(); i++) {
                        if (icodigo.getText().equals(iproduct.getValueAt(i, 0).toString())) {
                            JOptionPane.showMessageDialog(null, "El código ingresado ya existe.", "Código", JOptionPane.ERROR_MESSAGE);
                            iscoderepeat = true;
                            break;
                        }
                    }

                    if (!iscoderepeat) {
                        if (inotiene.getSelectedItem() == "Ninguna") {
                            Object[] ipreproduct = {icodigo.getText(), iproducto.getText(), icantidad.getText(), iproveedor.getSelectedItem().toString(), formatear.format(ifechaingreso.getValue()), inotiene.getSelectedItem().toString(), ilote.getText(), iclase.getSelectedItem().toString(), iinvima.getText(), ivalorunitario.getText(), iiva.getText(), ivalortotal.getText()};
                            iproduct.addRow(ipreproduct);
                        } else {
                            Object[] ipreproduct = {icodigo.getText(), iproducto.getText(), icantidad.getText(), iproveedor.getSelectedItem().toString(), formatear.format(ifechaingreso.getValue()), formatear.format(icaducidad.getValue()), ilote.getText(), iclase.getSelectedItem().toString(), iinvima.getText(), ivalorunitario.getText(), iiva.getText(), ivalortotal.getText()};
                            iproduct.addRow(ipreproduct);
                        }

                        items = (DefaultTableModel) productos.getModel();
                        items.addRow(new Object[]{icodigo.getText(), iproducto.getText(), icantidad.getText(), ivalorunitario.getText(), iiva.getText()});
                        productos.setModel(items);
                        productoRegistrado();
                    }
                } catch (java.lang.NullPointerException providersnull) {
                    JOptionPane.showMessageDialog(null, "Para ingresar productos al inventario, como mínino, usted debe poseer un proveedor.\n En el momento no hay proveedores, intente registrar un proveedor.", "No hay proveedores", JOptionPane.ERROR_MESSAGE);
                }
            }
        } else {
            JOptionPane.showMessageDialog(null, "Por favor, digite todos los campos requeridos (*).", "Incompleto", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_iingresarproductoActionPerformed

    private void inotieneActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_inotieneActionPerformed
        if (inotiene.getSelectedItem() == "Ninguna") {
            icaducidad.setEnabled(false);
        } else {
            icaducidad.setEnabled(true);
        }
    }//GEN-LAST:event_inotieneActionPerformed

    private void ivalorunitarioKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_ivalorunitarioKeyTyped
        if (!Character.isDigit(evt.getKeyChar()) || "0".equals(ivalorunitario.getText()) || ivalorunitario.getText().length() >= 30) {
            evt.consume();
        } else if (icantidad.getText() != null && !"".equals(icantidad.getText())) {
            iiva.setText(String.valueOf((Double.parseDouble(ivalorunitario.getText() + evt.getKeyChar()) * Integer.parseInt(icantidad.getText())) * 0.19));
            ivalortotal.setText(String.valueOf((Double.parseDouble(ivalorunitario.getText() + evt.getKeyChar()) * Integer.parseInt(icantidad.getText())) + Double.parseDouble(iiva.getText())));
        }
    }//GEN-LAST:event_ivalorunitarioKeyTyped

    private void iivaKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_iivaKeyTyped
        if (!Character.isDigit(evt.getKeyChar())) {
            evt.consume();
        }
    }//GEN-LAST:event_iivaKeyTyped

    private void ivalorunitarioKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_ivalorunitarioKeyPressed
        if (evt.getKeyCode() == 46) {
            if (ivalorunitario.getText() == null || "".equals(ivalorunitario.getText()) && iunitvaluepoint == false) {
                evt.consume();
            } else if ("0".equals(ivalorunitario.getText())) {
                ivalorunitario.setText("0.");
                iunitvaluepoint = true;
            } else if ((ivalorunitario.getText() != null || !"".equals(ivalorunitario.getText())) && iunitvaluepoint == false) {
                ivalorunitario.setText(ivalorunitario.getText() + ".");
                iunitvaluepoint = true;
            }
        } else if (evt.getKeyCode() == 8) {
            String ipuvalue;
            try{
                ipuvalue = ivalorunitario.getText().substring(0, ivalorunitario.getText().length()-1);
                iunitvaluepoint = ipuvalue.contains("-");
            }catch(java.lang.StringIndexOutOfBoundsException minusone){
                ipuvalue = "";
                iunitvaluepoint = false;
            }

            if (icantidad.getText() != null && !"".equals(icantidad.getText()) && ivalorunitario.getText() != null && !"".equals(ivalorunitario.getText())) {
                if ("".equals(ipuvalue)) {
                    iiva.setText("0.0");
                    ivalortotal.setText("0.0");
                } else {
                    iiva.setText(String.valueOf((Double.parseDouble(ipuvalue) * Integer.parseInt(icantidad.getText())) * 0.19));
                    ivalortotal.setText(String.valueOf((Double.parseDouble(ipuvalue) * Integer.parseInt(icantidad.getText())) + Double.parseDouble(iiva.getText())));
                }
            }
        }
    }//GEN-LAST:event_ivalorunitarioKeyPressed

    private void icantidadKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_icantidadKeyTyped
        if (!Character.isDigit(evt.getKeyChar()) || icantidad.getText().length() >= 20 || (evt.getKeyChar() == '0' && (icantidad.getText() == null || "".equals(icantidad.getText())))) {
            evt.consume();
        } else if (ivalorunitario.getText() != null && !"".equals(ivalorunitario.getText())) {
            iiva.setText(String.valueOf((Double.parseDouble(ivalorunitario.getText()) * Integer.parseInt(icantidad.getText() + evt.getKeyChar())) * 0.19));
            ivalortotal.setText(String.valueOf((Double.parseDouble(ivalorunitario.getText()) * Integer.parseInt(icantidad.getText() + evt.getKeyChar())) + Double.parseDouble(iiva.getText())));
        }
    }//GEN-LAST:event_icantidadKeyTyped

    private void fcantidadKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_fcantidadKeyTyped
        if (!Character.isDigit(evt.getKeyChar()) || fcantidad.getText().length() >= 20 || (evt.getKeyChar() == '0' && (fcantidad.getText() == null || "".equals(fcantidad.getText())))) {
            evt.consume();
        } else {
            int precant;
            double prevaltotal;
            int[] indices = factura.getSelectedRows();

            for (int i : indices) {
                if (factura.getSelectedRow() == i) {
                    for (int j = 0; j < productos.getRowCount(); j++) {
                        if (factura.getValueAt(factura.getSelectedRow(), 0) == productos.getValueAt(j, 0)) {
                            if (Integer.parseInt(fcantidad.getText() + evt.getKeyChar()) > Integer.parseInt(productos.getValueAt(j, 2).toString())) {
                                JOptionPane.showMessageDialog(null, "No puede digitar una cantidad mayor al producto disponible.", "Valor erróneo", JOptionPane.WARNING_MESSAGE);
                                evt.consume();
                                break;
                            } else {
                                precant = Integer.parseInt(fcantidad.getText() + evt.getKeyChar());
                                factura.setValueAt(precant, i, 2);
                                prevaltotal = Double.parseDouble(factura.getValueAt(i, 3).toString()) * precant;
                                factura.setValueAt(prevaltotal, i, 4);
                                break;
                            }
                        }
                    }
                }
            }
        }
    }//GEN-LAST:event_fcantidadKeyTyped

    private void ffacturarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_ffacturarActionPerformed
        if (fvalorapagar.getText() != null && !"".equals(fvalorapagar.getText())) {
            if (Double.parseDouble(fvalorapagar.getText()) >= Double.parseDouble(fvalortotal.getText())) {
                char[] fverfyvalorapagar;
                fverfyvalorapagar = fvalorapagar.getText().toCharArray();

                if (fverfyvalorapagar[fverfyvalorapagar.length - 1] != '.') {
                    Double residuo = Double.parseDouble(fvalorapagar.getText()) - Double.parseDouble(fvalortotal.getText());
                    fresiduo.setText(residuo.toString());
                    cantf++;
                    int siguardar = JOptionPane.showConfirmDialog(null, "Gracias por su compra.\n¿Desea guardar la factura?", "Compra exitosa", JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE);
                    if (siguardar == JOptionPane.YES_OPTION) {
                        guardarFactura();
                    }

                    for (int i = 0; i < factura.getRowCount(); i++) {
                        for (int j = 0; j < productos.getRowCount(); j++) {
                            if (factura.getValueAt(i, 0) == productos.getValueAt(j, 0)) {
                                vendidos = vendidos + Integer.parseInt(factura.getValueAt(i, 2).toString());
                                productos.setValueAt(Integer.parseInt(productos.getValueAt(j, 2).toString()) - Integer.parseInt(factura.getValueAt(i, 2).toString()), j, 2);
                                productos.setValueAt(Integer.parseInt(productos.getValueAt(j, 2).toString()) * Double.parseDouble(productos.getValueAt(j, 3).toString()) * 0.19, j, 4);
                                iproduct.setValueAt(productos.getValueAt(j, 2), j, 2);
                                iproduct.setValueAt(productos.getValueAt(j, 4), j, 10);
                                iproduct.setValueAt(Integer.parseInt(productos.getValueAt(j, 2).toString()) * Double.parseDouble(productos.getValueAt(j, 3).toString()) + Double.parseDouble(productos.getValueAt(j, 4).toString()), j, 11);
                                if ("0".equals(productos.getValueAt(j, 2).toString())) {
                                    DefaultTableModel fpreitems = (DefaultTableModel) productos.getModel();
                                    fpreitems.removeRow(j);
                                    productos.setModel(fpreitems);
                                    iproduct.removeRow(j);
                                }
                            }
                        }
                    }
                    facturado();
                } else {
                    JOptionPane.showMessageDialog(null, "Digite correctamente el campo de valor a pagar.", "Punto decimal", JOptionPane.ERROR_MESSAGE);
                }
            } else {
                JOptionPane.showMessageDialog(null, "No puede pagar con una cantidad menor a la requerida.", "Valor incorrecto", JOptionPane.ERROR_MESSAGE);
            }
        } else {
            JOptionPane.showMessageDialog(null, "Digite el valor a pagar.", "Nulo", JOptionPane.ERROR_MESSAGE);
        }
    }//GEN-LAST:event_ffacturarActionPerformed

    private void formWindowOpened(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_formWindowOpened
        this.setResizable(false);
        Image icon = Toolkit.getDefaultToolkit().getImage(getClass().getResource("/img/Icon.png"));
            setIconImage(icon);
            setVisible(true);
    }//GEN-LAST:event_formWindowOpened

    private void fagregarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_fagregarActionPerformed
        items = (DefaultTableModel) factura.getModel();

        if (productos.getSelectedRowCount() <= 0) {
            JOptionPane.showMessageDialog(null, "Antes de agregar productos a la cesta, tiene que seleccionarlos.", "Seleccione los productos a agregar", JOptionPane.WARNING_MESSAGE);
        } else {
            int[] indices = productos.getSelectedRows();

            if (!fthereareitems) {
                for (int i : indices) {

                    Object[] fila = new Object[productos.getColumnCount()];

                    for (int j = 0; j < fila.length; j++) {
                        if (j == fila.length - 1) {
                            fila[j] = Double.parseDouble(productos.getValueAt(i, 3).toString()) * Double.parseDouble(productos.getValueAt(i, 2).toString());
                        } else {
                            fila[j] = productos.getValueAt(i, j);
                        }
                    }
                    items.addRow(fila);
                }
                fthereareitems = true;
                factura.setModel(items);
            } else {
                Object[] columna = new Object[factura.getRowCount()];
                boolean frepetido = false;

                for (int i = 0; i < factura.getRowCount(); i++) {
                    columna[i] = factura.getValueAt(i, 0);
                    if (productos.getValueAt(productos.getSelectedRow(), 0) == columna[i]) {
                        JOptionPane.showMessageDialog(null, "Este producto ya se encuentra agregado.", "Repetido", JOptionPane.WARNING_MESSAGE);
                        frepetido = true;
                        break;
                    }
                }
                if (!frepetido) {
                    for (int i : indices) {
                        Object[] fila = new Object[productos.getColumnCount()];

                        for (int j = 0; j < fila.length; j++) {
                            if (j == fila.length - 1) {
                                fila[j] = Double.parseDouble(productos.getValueAt(i, 3).toString()) * Double.parseDouble(productos.getValueAt(i, 2).toString());
                            } else {
                                fila[j] = productos.getValueAt(i, j);
                            }
                        }
                        items.addRow(fila);
                    }
                    factura.setModel(items);
                }
            }
        }
    }//GEN-LAST:event_fagregarActionPerformed

    private void fesafiliadoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_fesafiliadoActionPerformed
        if (fesafiliado.isSelected()) {
            fidafiliado.setEnabled(true);
            fbuscar.setEnabled(true);
            FLIDAfiliado.setEnabled(true);
            fnombrecliente.setEnabled(false);
            fidcliente.setEnabled(false);
            FLNameCliente.setEnabled(false);
            FLIDCliente.setEnabled(false);
            fesafiliado.setText("SI");
        } else if (!fesafiliado.isSelected()) {
            fidafiliado.setEnabled(false);
            fbuscar.setEnabled(false);
            FLIDAfiliado.setEnabled(false);
            fnombrecliente.setEnabled(true);
            fidcliente.setEnabled(true);
            FLNameCliente.setEnabled(true);
            FLIDCliente.setEnabled(true);
            fesafiliado.setText("NO");
        }
    }//GEN-LAST:event_fesafiliadoActionPerformed

    private void fquitarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_fquitarActionPerformed
        items = (DefaultTableModel) factura.getModel();

        if (factura.getSelectedRowCount() <= 0) {
            JOptionPane.showMessageDialog(null, "Antes de quitar productos a la cesta, tiene que seleccionarlos.", "Seleccione los productos a quitar", JOptionPane.WARNING_MESSAGE);
        } else {
            int[] indices = factura.getSelectedRows();
            for (int i : indices) {
                if (factura.getSelectedRow() == i) {
                    items.removeRow(i);
                }
            }
            factura.setModel(items);
        }
        if (factura.getRowCount() == 0) {
            fthereareitems = false;
        }
    }//GEN-LAST:event_fquitarActionPerformed

    private void facturaMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_facturaMouseClicked
        if (factura.getSelectedRowCount() > 0) {
            int indices = factura.getRowCount();
            for (int i = 0; i < indices; i++) {
                if (factura.getSelectedRow() == i) {
                    String preIDproducto = factura.getValueAt(i, 0).toString();
                    for (int j = 0; j < iproduct.getRowCount(); j++) {
                        if (preIDproducto.equals(iproduct.getValueAt(j, 0).toString())) {
                            fcantidad.setText(factura.getValueAt(i, 2).toString());
                            flote.setText(iproduct.getValueAt(j, 6).toString());
                            fclase.setText(iproduct.getValueAt(j, 7).toString());
                            finvima.setText(iproduct.getValueAt(j, 8).toString());
                            fcaducidad.setText(iproduct.getValueAt(j, 5).toString());
                            break;
                        }
                    }
                }
            }
        }
    }//GEN-LAST:event_facturaMouseClicked

    private void fbuscarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_fbuscarActionPerformed
        boolean verfclients = false;
        for (int i = 0; i < cclients.getRowCount(); i++) {
            if (fidafiliado.getText().equals(cclients.getValueAt(i, 0))) {
                JOptionPane.showMessageDialog(null, "El cliente se ha encontrado en el sistema.\nNombre: " + cclients.getValueAt(i, 1) + "\nApellidos: " + cclients.getValueAt(i, 2), "Encontrado", JOptionPane.INFORMATION_MESSAGE);
                verfclients = true;
                clientfound = true;
                break;
            } else {
                verfclients = false;
            }
        }
        if (!verfclients) {
            JOptionPane.showMessageDialog(null, "El cliente no se encuentra en el sistema. Verifique que la cédula fue introducida correctamente.", "No encontrado", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_fbuscarActionPerformed

    private void fcalcularActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_fcalcularActionPerformed
        int indices = factura.getRowCount();
        boolean nothing = false;
        for (int i = 0; i < indices; i++) {
            if ("0".equals(factura.getValueAt(i, 2).toString())) {
                nothing = true;
                break;
            }
        }

        if (factura.getRowCount() > 0 && !nothing && ((fnombrecliente.getText() != null && !"".equals(fnombrecliente.getText()) && fidcliente.getText() != null && !"".equals(fidcliente.getText())) || (fesafiliado.isSelected() && clientfound && fidafiliado.getText() != null && !"".equals(fesafiliado.getText())))) {
            double subtotal = 0, iva, descuento, total;

            for (int i = 0; i < factura.getRowCount(); i++) {
                subtotal = subtotal + Double.parseDouble(factura.getValueAt(i, 4).toString());
            }
            iva = subtotal * 0.19;
            if (fesafiliado.isSelected()) {
                total = subtotal + iva;
                descuento = total * 0.05;
                fdescuento.setText(String.valueOf(total));
                fsymbol5.setText(" - $");
                fdescuento1.setText(String.valueOf(descuento));
                total = total - descuento;
                fsubtotal.setText(String.valueOf(subtotal));
                fvalortotal.setText(String.valueOf(total));
                fiva.setText(String.valueOf(iva));
            } else {
                total = subtotal + iva;
                descuento = 0;
                fdescuento.setText(String.valueOf(descuento));
                fdescuento1.setText("");
                fsymbol5.setText("");
                fsubtotal.setText(String.valueOf(subtotal));
                fvalortotal.setText(String.valueOf(total));
                fiva.setText(String.valueOf(iva));
            }
            FLValPagar.setEnabled(true);
            FLResiduo.setEnabled(true);
            fvalorapagar.setEnabled(true);
            ffacturar.setEnabled(true);
            fcancelar.setEnabled(true);
            fcantidad.setEnabled(false);
            fcalcular.setEnabled(false);
            fagregar.setEnabled(false);
            fquitar.setEnabled(false);
            FLNameCliente.setEnabled(false);
            FLIDCliente.setEnabled(false);
            fnombrecliente.setEnabled(false);
            fidcliente.setEnabled(false);
            fesafiliado.setEnabled(false);
            FLIsAfiliated.setEnabled(false);
            FLIDAfiliado.setEnabled(false);
            fidafiliado.setEnabled(false);
            fbuscar.setEnabled(false);
            FLBuscarItem.setEnabled(false);
            fbuscaritem.setEnabled(false);
            fbuscarproducto.setEnabled(false);
        } else {
            JOptionPane.showMessageDialog(null, "Debe ingresar la cantidad a cada producto y nombre y cédula del comprador.", "Vacío", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_fcalcularActionPerformed

    private void fcancelarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_fcancelarActionPerformed
        FLValPagar.setEnabled(false);
        FLResiduo.setEnabled(false);
        fvalorapagar.setEnabled(false);
        ffacturar.setEnabled(false);
        fcancelar.setEnabled(false);
        fcantidad.setEnabled(true);
        fcalcular.setEnabled(true);
        fagregar.setEnabled(true);
        fquitar.setEnabled(true);
        fesafiliado.setEnabled(true);
        FLIsAfiliated.setEnabled(true);
        FLBuscarItem.setEnabled(true);
        fbuscaritem.setEnabled(true);
        fbuscarproducto.setEnabled(true);
        if (fesafiliado.isSelected()) {
            fidafiliado.setEnabled(true);
            fbuscar.setEnabled(true);
            FLIDAfiliado.setEnabled(true);
        } else if (!fesafiliado.isSelected()) {
            FLNameCliente.setEnabled(true);
            FLIDCliente.setEnabled(true);
            fnombrecliente.setEnabled(true);
            fidcliente.setEnabled(true);
        }
        fsubtotal.setText("0");
        fvalortotal.setText("0");
        fdescuento.setText("0");
        fdescuento1.setText("");
        fsymbol5.setText("");
        fiva.setText("0");
        fvalorapagar.setText("");
        fresiduo.setText("");
    }//GEN-LAST:event_fcancelarActionPerformed

    private void icantidadKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_icantidadKeyPressed
        if (evt.getKeyCode() == 8) {
            if (ivalorunitario.getText() != null && !"".equals(ivalorunitario.getText()) && icantidad.getText() != null && !"".equals(icantidad.getText())) {
                String iprquantity;
                try{
                    iprquantity = ivalorunitario.getText().substring(0, ivalorunitario.getText().length()-1);
                }catch(java.lang.StringIndexOutOfBoundsException minusone){
                    iprquantity = "";
                }
                if ("".equals(iprquantity) || iprquantity == null) {
                    iiva.setText("0.0");
                    ivalortotal.setText("0.0");
                } else {
                    iiva.setText(String.valueOf((Double.parseDouble(ivalorunitario.getText()) * Integer.parseInt(iprquantity)) * 0.19));
                    ivalortotal.setText(String.valueOf((Double.parseDouble(ivalorunitario.getText()) * Integer.parseInt(iprquantity)) + Double.parseDouble(iiva.getText())));
                }
            }
        }
    }//GEN-LAST:event_icantidadKeyPressed

    private void fcantidadKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_fcantidadKeyPressed
        if (evt.getKeyCode() == 8) {
            if (fcantidad.getText() != null && !"".equals(fcantidad.getText())) {
                String fprquantity;
                try{
                    fprquantity = fcantidad.getText().substring(0, fcantidad.getText().length()-1);
                }catch(java.lang.StringIndexOutOfBoundsException minusone){
                    fprquantity = "";
                }
                int precant;
                double prevaltotal;
                int[] indices = factura.getSelectedRows();
                if ("".equals(fprquantity) || fprquantity == null) {
                    for (int i : indices) {
                        if (factura.getSelectedRow() == i) {
                            precant = 0;
                            factura.setValueAt(precant, i, 2);
                            prevaltotal = Double.parseDouble(factura.getValueAt(i, 3).toString()) * precant;
                            factura.setValueAt(prevaltotal, i, 4);
                            break;
                        }
                    }
                } else {
                    for (int i : indices) {
                        if (factura.getSelectedRow() == i) {
                            precant = Integer.parseInt(fprquantity);
                            factura.setValueAt(precant, i, 2);
                            prevaltotal = Double.parseDouble(factura.getValueAt(i, 3).toString()) * precant;
                            factura.setValueAt(prevaltotal, i, 4);
                            break;
                        }
                    }
                }
            }
        }
    }//GEN-LAST:event_fcantidadKeyPressed

    private void fvalorapagarKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_fvalorapagarKeyTyped
        if (!Character.isDigit(evt.getKeyChar()) || "0".equals(fvalorapagar.getText())) {
            evt.consume();
        }
    }//GEN-LAST:event_fvalorapagarKeyTyped

    private void fvalorapagarKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_fvalorapagarKeyPressed
        if (evt.getKeyCode() == 46) {
            if (fvalorapagar.getText() == null || "".equals(fvalorapagar.getText()) && fvalorapagarpoint == false) {
                evt.consume();
            } else if ("0".equals(fvalorapagar.getText())) {
                fvalorapagar.setText("0.");
                fvalorapagarpoint = true;
            } else if ((fvalorapagar.getText() != null || !"".equals(fvalorapagar.getText())) && fvalorapagarpoint == false) {
                fvalorapagar.setText(fvalorapagar.getText() + ".");
                fvalorapagarpoint = true;
            }
        } else if (evt.getKeyCode() == 8) {
            String fprevalorapagarvalue;
            try{
                fprevalorapagarvalue = fvalorapagar.getText().substring(0, fvalorapagar.getText().length()-1);
            }catch(java.lang.StringIndexOutOfBoundsException minusone){
                fprevalorapagarvalue = "";
            }
            fvalorapagarpoint = fprevalorapagarvalue.contains(".");
        }
    }//GEN-LAST:event_fvalorapagarKeyPressed

    private void fidclienteKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_fidclienteKeyTyped
        if (!Character.isDigit(evt.getKeyChar()) || fidcliente.getText().length() >= 12) {
            evt.consume();
        }
    }//GEN-LAST:event_fidclienteKeyTyped

    private void openActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_openActionPerformed
        abrirArchivo();
    }//GEN-LAST:event_openActionPerformed

    private void saveActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_saveActionPerformed
        guardarInventario();
    }//GEN-LAST:event_saveActionPerformed

    private void fbuscarproductoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_fbuscarproductoActionPerformed
        boolean encontrado = false;
        if(fbuscaritem.getText() != null && !"".equals(fbuscaritem.getText())){
            for(int i=0;i<productos.getRowCount();i++){
                if(productos.getValueAt(i, 0).toString().equals(fbuscaritem.getText())){
                    productos.changeSelection(i, 0, false, false);
                    encontrado = true;
                    break;
                }
            }
            if(!encontrado){
                JOptionPane.showMessageDialog(null, "No se pudo encontrar el producto.", "No encontrado", JOptionPane.WARNING_MESSAGE);
            }
        }else{
            JOptionPane.showMessageDialog(null, "Digite el código del producto a buscar.", "Vacío", JOptionPane.WARNING_MESSAGE);
        }
    }//GEN-LAST:event_fbuscarproductoActionPerformed

    private void editprovidersActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_editprovidersActionPerformed
        new EditarProveedores(pproviders, modelproveedores).setVisible(true);
    }//GEN-LAST:event_editprovidersActionPerformed

    private void pnitocedulaKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_pnitocedulaKeyPressed
        if("NIT".equals(PLNIToCedula.getSelectedItem().toString())){
            if (evt.getKeyCode() == 45) {
                if (pnitocedula.getText() == null || "".equals(pnitocedula.getText()) && pguionnit == false) {
                    evt.consume();
                } else if ((pnitocedula.getText() != null || !"".equals(pnitocedula.getText())) && pguionnit == false) {
                    pnitocedula.setText(pnitocedula.getText() + "-");
                    pguionnit = true;
                }
            } else if (evt.getKeyCode() == 8) {
                try{
                    String cadena = pnitocedula.getText().substring(0, pnitocedula.getText().length()-1);
                    pguionnit = cadena.contains("-");
                }catch(java.lang.StringIndexOutOfBoundsException minusone){
                    pguionnit = false;
                }
            }
        }
    }//GEN-LAST:event_pnitocedulaKeyPressed

    private void pdireccionKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_pdireccionKeyTyped
        if(pdireccion.getText().length() >= 30){
            evt.consume();
        }
    }//GEN-LAST:event_pdireccionKeyTyped

    private void pempresaKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_pempresaKeyTyped
        if(pempresa.getText().length() >= 30){
            evt.consume();
        }
    }//GEN-LAST:event_pempresaKeyTyped

    private void cdireccionKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_cdireccionKeyTyped
        if(cdireccion.getText().length() >= 30){
            evt.consume();
        }
    }//GEN-LAST:event_cdireccionKeyTyped

    private void cempresaKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_cempresaKeyTyped
        if(cempresa.getText().length() >= 30){
            evt.consume();
        }
    }//GEN-LAST:event_cempresaKeyTyped

    private void iproductoKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_iproductoKeyTyped
        if(iproducto.getText().length() >= 30){
            evt.consume();
        }
    }//GEN-LAST:event_iproductoKeyTyped

    private void icodigoKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_icodigoKeyTyped
        if(icodigo.getText().length() >= 30){
            evt.consume();
        }
    }//GEN-LAST:event_icodigoKeyTyped

    private void iloteKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_iloteKeyTyped
        if(ilote.getText().length() >= 30){
            evt.consume();
        }
    }//GEN-LAST:event_iloteKeyTyped

    private void iinvimaKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_iinvimaKeyTyped
        if(iinvima.getText().length() >= 30){
            evt.consume();
        }
    }//GEN-LAST:event_iinvimaKeyTyped

    private void fbuscaritemKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_fbuscaritemKeyTyped
        if(fbuscaritem.getText().length() >= 30){
            evt.consume();
        }
    }//GEN-LAST:event_fbuscaritemKeyTyped

    private void fidafiliadoKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_fidafiliadoKeyTyped
        if(fidafiliado.getText().length() >= 12){
            evt.consume();
        }
    }//GEN-LAST:event_fidafiliadoKeyTyped

    private void fnombreclienteKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_fnombreclienteKeyTyped
        if(fnombrecliente.getText().length() >= 30){
            evt.consume();
        }
    }//GEN-LAST:event_fnombreclienteKeyTyped

    private void editclientsActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_editclientsActionPerformed
        new EditarClientes(cclients).setVisible(true);
    }//GEN-LAST:event_editclientsActionPerformed

    private void editproductsActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_editproductsActionPerformed
        new EditarProductos(iproduct, items, modelproveedores).setVisible(true);
    }//GEN-LAST:event_editproductsActionPerformed

    public void setCclients(Object[][] clientesenviados) {
        DefaultTableModel sendclients = (DefaultTableModel) modelclients.getModel();
        for (Object[] clientesenviado : clientesenviados) {
            sendclients.addRow(clientesenviado);
        }
        cclients = sendclients;
        System.out.println(cclients.getValueAt(0, 0));
    }

    private void proveedorRegistrado() {
        JOptionPane.showMessageDialog(null, "El proveedor ha sido registrado exitosamente.", "Registrado", JOptionPane.INFORMATION_MESSAGE);
        pnombres.setText("");
        papellidos.setText("");
        pdireccion.setText("");
        pnitocedula.setText("");
        pempresa.setText("");
        ptelefono.setText("");
        PLNIToCedula.setSelectedItem("NIT");
        PLDireccion.setText("*Dirección de la empresa:");
        PLEmpresa.setEnabled(true);
        pempresa.setEnabled(true);
        pguionnit = false;
    }

    private void clienteRegistrado() {
        JOptionPane.showMessageDialog(null, "El cliente ha sido registrado exitosamente.", "Registrado", JOptionPane.INFORMATION_MESSAGE);
        cnombres.setText("");
        capellidos.setText("");
        cdireccion.setText("");
        ccedula.setText("");
        cempresa.setText("");
        ctelefono.setText("");
    }

    private void productoRegistrado() {
        JOptionPane.showMessageDialog(null, "El producto ha sido ingresado al inventario exitosamente.", "Ingresado", JOptionPane.INFORMATION_MESSAGE);
        localdate = new Date();
        iproducto.setText("");
        icodigo.setText("");
        ifechaingreso.setValue(localdate);
        icantidad.setText("");
        icaducidad.setEnabled(true);
        icaducidad.setValue(localdate);
        inotiene.setSelectedIndex(0);
        ilote.setText("");
        iinvima.setText("");
        ivalorunitario.setText("");
        iiva.setText("");
        ivalortotal.setText("");
        iunitvaluepoint = false;
    }

    private void facturado() {
        FLValPagar.setEnabled(false);
        FLResiduo.setEnabled(false);
        fvalorapagar.setEnabled(false);
        fresiduo.setEnabled(false);
        ffacturar.setEnabled(false);
        fcancelar.setEnabled(false);
        fcantidad.setEnabled(true);
        fcalcular.setEnabled(true);
        fagregar.setEnabled(true);
        fquitar.setEnabled(true);
        fesafiliado.setEnabled(true);
        FLIsAfiliated.setEnabled(true);
        FLBuscarItem.setEnabled(true);
        fbuscaritem.setEnabled(true);
       fbuscarproducto.setEnabled(true);
        if (fesafiliado.isSelected()) {
            fidafiliado.setEnabled(true);
            fbuscar.setEnabled(true);
            FLIDAfiliado.setEnabled(true);
            fidafiliado.setText("");
        } else if (!fesafiliado.isSelected()) {
            FLNameCliente.setEnabled(true);
            FLIDCliente.setEnabled(true);
            fnombrecliente.setEnabled(true);
            fidcliente.setEnabled(true);
            fnombrecliente.setText("");
            fidcliente.setText("");
        }
        fsubtotal.setText("0");
        fvalortotal.setText("0");
        fdescuento.setText("0");
        fdescuento1.setText("");
        fsymbol5.setText("");
        fiva.setText("0");
        fvalorapagar.setText("");
        fresiduo.setText("");
        fcantidad.setText("");
        flote.setText("");
        finvima.setText("");
        fcaducidad.setText("");
        fclase.setText("");
        fbuscaritem.setText("");
        factura.setModel(new javax.swing.table.DefaultTableModel(
                new Object[][]{},
                new String[]{
                    "Código", "Nombre", "Cantidad", "Valor unitario", "Valor total"
                }
        ) {
            boolean[] canEdit = new boolean[]{
                false, false, false, false, false
            };

            @Override
            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit[columnIndex];
            }
        });
    }

    private String nameClient() {
        String namec = "";
        if (fesafiliado.isSelected()) {
            for (int i = 0; i < factura.getRowCount(); i++) {
                if (factura.getValueAt(i, 0).toString().equals(fidafiliado.getText())) {
                    namec = factura.getValueAt(i, 1).toString();
                    break;
                }
            }
            return namec;
        } else {
            return fnombrecliente.getText();
        }
    }

    private String idClient() {
        String idc = "";
        if (fesafiliado.isSelected()) {
            for (int i = 0; i < factura.getRowCount(); i++) {
                if (factura.getValueAt(i, 0).toString().equals(fidafiliado.getText())) {
                    idc = factura.getValueAt(i, 0).toString();
                }
            }
            return idc;
        } else {
            return fidcliente.getText();
        }
    }

    private String productosVendidos() {
        String ventas = "";
        for (int i = 0; i < factura.getRowCount(); i++) {
            ventas = ventas + "\n" + factura.getValueAt(i, 2) + "\t\t" + factura.getValueAt(i, 1) + "\t\t" + factura.getValueAt(i, 3) + "\t\t" + factura.getValueAt(i, 4);
        }
        return ventas;
    }

    private String haveDiscount() {
        if ("".equals(fdescuento1.getText())) {
            return fdescuento.getText();
        } else {
            return fdescuento1.getText();
        }
    }

    private void guardarFactura() {
        archivos.removeChoosableFileFilter(filterfac);
        archivos.removeChoosableFileFilter(filterinv);
        archivos.setFileFilter(filterfac);
        localdate = new Date();
        String bill = "Factura Nº" + cantf
                + "\nFecha: " + localdate.toString()
                + "\n\nCliente: " + nameClient() + "\t\t" + "Cédula: " + idClient()
                + "\n\nCantidad\t\tProductos\t\tValor unitario\t\tValor total"
                + productosVendidos()
                + "\n\nSubtotal:\t\t\t\t\t\t" + fsubtotal.getText()
                + "\nIVA: " + fiva.getText() + "\t\tDescuento: " + haveDiscount() + "\t\tTOTAL: " + fvalortotal.getText();
        try {
            int seleccion = archivos.showSaveDialog(this);
            if(seleccion == JFileChooser.APPROVE_OPTION){
                File guardar = archivos.getSelectedFile();
                
                if(guardar.getName() != null && !"".equals(guardar.getName())){
                    String ruta = archivos.getSelectedFile().getAbsolutePath().replace(".fac", "");
                    if (!new File(ruta + ".fac").exists()) {
                        try (FileWriter guard = new FileWriter(guardar + ".fac"); BufferedWriter guardo = new BufferedWriter(guard)) {
                            guardo.write(bill);
                            guardo.close();
                            guard.close();
                        }
                        JOptionPane.showMessageDialog(null, "La factura se ha guardado exitosamente.", "Guardado", JOptionPane.INFORMATION_MESSAGE);
                    }else{
                        int siguardar = JOptionPane.showConfirmDialog(null, "El archivo ya existe.\n¿Desea sobreescribirlo?", "Ya existe", JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE);
                        if(siguardar == JOptionPane.YES_OPTION){
                            try (FileWriter guard = new FileWriter(guardar.getName().replace(".fac", "") + ".fac"); BufferedWriter guardo = new BufferedWriter(guard)) {
                                guardo.write(bill);
                                guardo.close();
                                guard.close();
                            }
                            JOptionPane.showMessageDialog(null, "La factura se ha guardado exitosamente.", "Guardado", JOptionPane.INFORMATION_MESSAGE);
                        }
                    }
                }else{
                    JOptionPane.showMessageDialog(null, "No puede dejar el campo de nombre vacío.", "Vacío", JOptionPane.WARNING_MESSAGE);
                }
            }                
        } catch (IOException ex) {
            JOptionPane.showMessageDialog(null, "Su archivo no se ha guardado.", "Advertencia", JOptionPane.ERROR_MESSAGE);
        }
    }

    private void abrirArchivo() {
        archivos.removeChoosableFileFilter(filterfac);
        archivos.removeChoosableFileFilter(filterinv);
        archivos.setFileFilter(filterinv);
        archivos.setFileFilter(filterfac);
        //Se abre la ventana guardar, y se guarda la opcion seleccionada por el usuario
        int seleccion = archivos.showOpenDialog(this);

        //Si el usuario, pincha en aceptar
        if (seleccion == JFileChooser.APPROVE_OPTION) {
            //Se selecciona el fichero
            File fichero = archivos.getSelectedFile();
//            System.out.println(archivos.getSelectedFile());

            try (FileReader leer = new FileReader(fichero)) {
                String cadena = "";
                if ("Archivos de facturas (.fac)".equals(archivos.getFileFilter().getDescription())) {
                    int valor = leer.read();
                    while (valor != -1) {
                        cadena = cadena + (char) valor;
                        valor = leer.read();
                    }
                    new VisorFacturas(cadena).setVisible(true);
                } else if ("Archivos de inventarios (.inv)".equals(archivos.getFileFilter().getDescription())) {
                    try (BufferedReader read = new BufferedReader(leer)) {
                        while((cadena = read.readLine()) != null){
                            reiniciarModelosTablas();
                            String[] datos = cadena.split("#");
                            String[] proveedores = datos[0].split("¬");
                            proveedores[0] = quitarPunto(proveedores[0]);
                            String[] comboboxproveedores = datos[1].split("¬");
                            String[] clientes = datos[2].split("¬");
                            String[] articulos = datos[3].split("¬");
                            String[] products = datos[4].split("¬");
                            cantf = Integer.parseInt(datos[5]);
                            vendidos = Integer.parseInt(datos[6]);
                            
                            pproviders = (DefaultTableModel) modelproviders.getModel();
                            cclients = (DefaultTableModel) modelclients.getModel();
                            iproduct = (DefaultTableModel) modelitems.getModel();
                            items = (DefaultTableModel) productos.getModel();
                            modelproveedores = new DefaultComboBoxModel();
                            System.out.println(Arrays.toString(datos));
                                                        
                            for (String proveedore : proveedores) {
                                for (String split : proveedore.split("%")) {
                                    Object[] columnas = proveedore.split("%");
                                    System.out.println(Arrays.toString(columnas));
                                    pproviders.addRow(columnas);
                                    break;
                                }
                            }
                            for (String comboboxproveedore : comboboxproveedores) {
                                modelproveedores.addElement(comboboxproveedore);
                            }
                            for (String cliente : clientes) {
                                for (String split : cliente.split("%")) {
                                    Object[] columnas = cliente.split("%");
//                                    System.out.println(Arrays.toString(columnas));
                                    cclients.addRow(columnas);
                                    break;
                                }
                            }
                            for (String articulo : articulos) {
                                for (String split : articulo.split("%")) {
                                    Object[] columnas = articulo.split("%");
//                                    System.out.println(Arrays.toString(columnas));
                                    iproduct.addRow(columnas);
                                    break;
                                }
                            }
                            for (String product : products) {
                                for (String split : product.split("%")) {
                                    Object[] columnas = product.split("%");
//                                    System.out.println(Arrays.toString(columnas));
                                    items.addRow(columnas);
                                    break;
                                }
                            }
                            iproveedor.setModel(modelproveedores);
                            productos.setModel(items);
                        }
                        read.close();
                    }                    
                }
                leer.close();
            } catch (IOException e1) {
                JOptionPane.showMessageDialog(null, "El archivo no pudo abrirse correctamente.", "Advertencia", JOptionPane.ERROR_MESSAGE);
            }
        }
    }

    private void guardarInventario() {
        archivos.removeChoosableFileFilter(filterfac);
        archivos.removeChoosableFileFilter(filterinv);
        archivos.setFileFilter(filterinv);
        try {
            int seleccion = archivos.showSaveDialog(this);
            if(seleccion == JFileChooser.APPROVE_OPTION){
                File guardar = archivos.getSelectedFile();
                if(guardar.getName() != null && !"".equals(guardar.getName())){
                    String ruta = archivos.getSelectedFile().getAbsolutePath().replace(".inv", "");
//                    System.out.println(ruta);
//                    System.out.println(guardar.getName());
//                    System.out.println(archivos.getSelectedFile().getName());
                    if(!new File(ruta + ".inv").exists()){
                        try (FileWriter guard = new FileWriter(guardar + ".inv"); BufferedWriter guardo = new BufferedWriter(guard)) {
                            guardo.write(serializarProveedores() + "#" + serializarComboBoxProveedores() + "#" + serializarClientes() + "#" + serializarProductos1() + "#" + serializarProductos2() + "#" + cantf + "#" + vendidos);
                            JOptionPane.showMessageDialog(null, "El inventario se ha guardado exitosamente.", "Guardado", JOptionPane.INFORMATION_MESSAGE);
                        }
                    }else{
                        int siguardar = JOptionPane.showConfirmDialog(null, "El archivo ya existe.\n¿Desea sobreescribirlo?", "Ya existe", JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE);
                        if(siguardar == JOptionPane.YES_OPTION){
                            try (FileWriter guard = new FileWriter(guardar.getName().replace(".inv", "") + ".inv"); BufferedWriter guardo = new BufferedWriter(guard)) {
                                guardo.write(serializarProveedores() + "#" + serializarComboBoxProveedores() + "#" + serializarClientes() + "#" + serializarProductos1() + "#" + serializarProductos2() + "#" + cantf + "#" + vendidos);
                                JOptionPane.showMessageDialog(null, "El inventario se ha guardado exitosamente.", "Guardado", JOptionPane.INFORMATION_MESSAGE);
                            }
                        }
                    }
                }else{
                    JOptionPane.showMessageDialog(null, "No puede dejar el campo de nombre vacío.", "Vacío", JOptionPane.WARNING_MESSAGE);
                }                  
            }
        } catch (IOException ex) {
            JOptionPane.showMessageDialog(null, "Su archivo no se ha guardado.", "Advertencia", JOptionPane.ERROR_MESSAGE);
        }
    }    
       
    private String quitarPunto(String preproviders){
        String providersfinal = preproviders.substring(1, preproviders.length());
        String paraverificar = preproviders.substring(0, 1);
        if(paraverificar.contains("﻿")){
            return providersfinal;
        }else{
            return preproviders;
        }
    }

    private String serializarProveedores() {
        String proveedores = "";
        try{
            for (int i = 0; i < pproviders.getRowCount(); i++) {
                for (int j = 0; j < pproviders.getColumnCount(); j++) {
                    if (j == pproviders.getColumnCount() - 1) {
                        proveedores = proveedores + pproviders.getValueAt(i, j);
                    } else {
                        proveedores = proveedores + pproviders.getValueAt(i, j) + "%";
                    }
                }
                if(i != pproviders.getRowCount() - 1){
                    proveedores = proveedores + "¬";
                }            
            }
            return proveedores;
        }catch(java.lang.NullPointerException err){
            return null;
        }
    }
    
    private String serializarComboBoxProveedores(){
        String combobox = "";
        try{
            for (int i = 0; i < iproveedor.getItemCount(); i++) {
                if(iproveedor.getItemCount()-1 != i){
                    combobox = combobox + iproveedor.getItemAt(i) + "¬";
                }else{
                    combobox = combobox + iproveedor.getItemAt(i);
                }
                System.out.println(modelproveedores.getElementAt(i));
            }
            return combobox;
        }catch(java.lang.NullPointerException err){
            return null;
        }
    }

    private String serializarClientes() {
        String clientes = "";
        try{
            for (int i = 0; i < cclients.getRowCount(); i++) {
                for (int j = 0; j < cclients.getColumnCount(); j++) {
                    if (j == cclients.getColumnCount() - 1) {
                        clientes = clientes + cclients.getValueAt(i, j);
                    } else {
                        clientes = clientes + cclients.getValueAt(i, j) + "%";
                    }
                }
                if(i != cclients.getRowCount()-1){
                    clientes = clientes + "¬";
                }
            }
            return clientes;
        }catch(java.lang.NullPointerException err){
            return null;
        }        
    }

    private String serializarProductos1() {
        String articulos = "";
        try{
            for (int i = 0; i < iproduct.getRowCount(); i++) {
                for (int j = 0; j < iproduct.getColumnCount(); j++) {
                    if (j == iproduct.getColumnCount() - 1) {
                        articulos = articulos + iproduct.getValueAt(i, j);
                    } else {
                        articulos = articulos + iproduct.getValueAt(i, j) + "%";
                    }
                }
                if(i != iproduct.getRowCount()-1){
                    articulos = articulos + "¬";
                }
            }
            return articulos;
        }catch(java.lang.NullPointerException err){
            return null;
        }            
    }

    private String serializarProductos2() {
        String item = "";
        try{
            for (int i = 0; i < productos.getRowCount(); i++) {
                for (int j = 0; j < productos.getColumnCount(); j++) {
                    if (j == productos.getColumnCount() - 1) {
                        item = item + productos.getValueAt(i, j);
                    } else {
                        item = item + productos.getValueAt(i, j) + "%";
                    }
                }
                if(i != productos.getRowCount()-1){
                    item = item + "¬";
                }
            }
            return item;
        }catch(java.lang.NullPointerException err){
            return null;
        }        
    }
    
    private void reiniciarModelosTablas(){
        productos.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Código", "Nombre", "Cantidad", "Valor unitario", "IVA"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false
            };

            @Override
            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        modelproviders.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "NIT/Cédula", "Nombre", "Apellidos", "Dirección/Dirección de empresa", "Empresa", "Teléfono"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false, false
            };

            @Override
            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        modelclients.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Cédula", "Nombre", "Apellidos", "Dirección", "Lugar de trabajo", "Teléfono"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false, false
            };

            @Override
            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        modelitems.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Código", "Nombre del producto", "Cantidad", "Proveedor", "Fecha y hora de ingreso", "Fecha de caducidad", "Lote", "Clase de producto", "INVIMA", "Valor unitario", "IVA", "Valor total"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false, false, false, false, false, false, false, false
            };

            @Override
            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
    }
    
    public void enviarProveedoresComboBox(DefaultComboBoxModel modelprovider){
        System.out.println(modelprovider.getElementAt(0));
        System.out.println(modelprovider.getElementAt(1));
        modelproveedores = modelprovider;
        iproveedor.setModel(modelproveedores);
        System.out.println(iproveedor.getItemAt(0));
        System.out.println(iproveedor.getItemAt(1));
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel CLApellidos;
    private javax.swing.JLabel CLDireccion;
    private javax.swing.JLabel CLEmpresa;
    private javax.swing.JLabel CLNombre;
    private javax.swing.JLabel CLTelefono;
    private javax.swing.JLabel FLBuscarItem;
    private javax.swing.JLabel FLCaducidad;
    private javax.swing.JLabel FLCantidad;
    private javax.swing.JLabel FLClase;
    private javax.swing.JLabel FLDescuento;
    private javax.swing.JLabel FLIDAfiliado;
    private javax.swing.JLabel FLIDCliente;
    private javax.swing.JLabel FLIVA;
    private javax.swing.JLabel FLInvima;
    private javax.swing.JLabel FLIsAfiliated;
    private javax.swing.JLabel FLLote;
    private javax.swing.JLabel FLNameCliente;
    private javax.swing.JLabel FLResiduo;
    private javax.swing.JLabel FLSubtotal;
    private javax.swing.JLabel FLValPagar;
    private javax.swing.JLabel FLValTotal;
    private javax.swing.JLabel PLApellidos;
    private javax.swing.JLabel PLCaducidad;
    private javax.swing.JLabel PLCantidad;
    private javax.swing.JLabel PLClase;
    private javax.swing.JLabel PLCodigo;
    private javax.swing.JLabel PLDireccion;
    private javax.swing.JLabel PLEmpresa;
    private javax.swing.JLabel PLFecha;
    private javax.swing.JLabel PLINVIMA;
    private javax.swing.JLabel PLLote;
    private javax.swing.JComboBox<String> PLNIToCedula;
    private javax.swing.JLabel PLNombre;
    private javax.swing.JLabel PLProducto;
    private javax.swing.JLabel PLProveedor;
    private javax.swing.JLabel PLTelefono;
    private javax.swing.JLabel PLValTotal;
    private javax.swing.JLabel PLValUnit;
    private javax.swing.JLabel PLiva;
    private javax.swing.JFileChooser archivos;
    private javax.swing.JLabel astericoNI;
    private javax.swing.JTextField capellidos;
    private javax.swing.JTextField ccedula;
    private javax.swing.JTextField cdireccion;
    private javax.swing.JTextField cempresa;
    private javax.swing.JPanel clients;
    private javax.swing.JTextField cnombres;
    private javax.swing.JButton cregistrar;
    private javax.swing.JTextField ctelefono;
    private javax.swing.JMenuItem editclients;
    private javax.swing.JMenuItem editproducts;
    private javax.swing.JMenuItem editproviders;
    private javax.swing.JMenuItem exit;
    private javax.swing.JTable factura;
    private javax.swing.JButton fagregar;
    private javax.swing.JButton fbuscar;
    private javax.swing.JTextField fbuscaritem;
    private javax.swing.JButton fbuscarproducto;
    private javax.swing.JTextField fcaducidad;
    private javax.swing.JButton fcalcular;
    private javax.swing.JButton fcancelar;
    private javax.swing.JTextField fcantidad;
    private javax.swing.JTextField fclase;
    private javax.swing.JLabel fdescuento;
    private javax.swing.JLabel fdescuento1;
    private javax.swing.JToggleButton fesafiliado;
    private javax.swing.JButton ffacturar;
    private javax.swing.JTextField fidafiliado;
    private javax.swing.JTextField fidcliente;
    private javax.swing.JTextField finvima;
    private javax.swing.JLabel fiva;
    private javax.swing.JTextField flote;
    private javax.swing.JTextField fnombrecliente;
    private javax.swing.JButton fquitar;
    private javax.swing.JTextField fresiduo;
    private javax.swing.JLabel fsubtotal;
    private javax.swing.JLabel fsymbol1;
    private javax.swing.JLabel fsymbol2;
    private javax.swing.JLabel fsymbol3;
    private javax.swing.JLabel fsymbol4;
    private javax.swing.JLabel fsymbol5;
    private javax.swing.JTextField fvalorapagar;
    private javax.swing.JLabel fvalortotal;
    private javax.swing.JSpinner icaducidad;
    private javax.swing.JTextField icantidad;
    private javax.swing.JComboBox<String> iclase;
    private javax.swing.JTextField icodigo;
    private javax.swing.JSpinner ifechaingreso;
    private javax.swing.JButton iingresarproducto;
    private javax.swing.JTextField iinvima;
    private javax.swing.JTextField iiva;
    private javax.swing.JTextField ilote;
    private javax.swing.JComboBox<String> inotiene;
    private javax.swing.JTextField iproducto;
    private javax.swing.JComboBox<String> iproveedor;
    private javax.swing.JTextField ivalortotal;
    private javax.swing.JTextField ivalorunitario;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel18;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JMenu jMenu1;
    private javax.swing.JMenu jMenu2;
    private javax.swing.JMenuBar jMenuBar1;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel10;
    private javax.swing.JPanel jPanel11;
    private javax.swing.JPanel jPanel12;
    private javax.swing.JPanel jPanel13;
    private javax.swing.JPanel jPanel14;
    private javax.swing.JPanel jPanel15;
    private javax.swing.JPanel jPanel16;
    private javax.swing.JPanel jPanel17;
    private javax.swing.JPanel jPanel18;
    private javax.swing.JPanel jPanel19;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel20;
    private javax.swing.JPanel jPanel21;
    private javax.swing.JPanel jPanel22;
    private javax.swing.JPanel jPanel23;
    private javax.swing.JPanel jPanel24;
    private javax.swing.JPanel jPanel25;
    private javax.swing.JPanel jPanel26;
    private javax.swing.JPanel jPanel27;
    private javax.swing.JPanel jPanel28;
    private javax.swing.JPanel jPanel29;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel30;
    private javax.swing.JPanel jPanel31;
    private javax.swing.JPanel jPanel33;
    private javax.swing.JPanel jPanel34;
    private javax.swing.JPanel jPanel35;
    private javax.swing.JPanel jPanel36;
    private javax.swing.JPanel jPanel37;
    private javax.swing.JPanel jPanel38;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JPanel jPanel6;
    private javax.swing.JPanel jPanel7;
    private javax.swing.JPanel jPanel8;
    private javax.swing.JPanel jPanel9;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JScrollPane jScrollPane4;
    private javax.swing.JPopupMenu.Separator jSeparator1;
    private javax.swing.JPopupMenu.Separator jSeparator2;
    private javax.swing.JSeparator jSeparator3;
    private javax.swing.JSeparator jSeparator4;
    private javax.swing.JSeparator jSeparator6;
    private javax.swing.JTabbedPane jTabbedPane1;
    private javax.swing.JPanel joinproducts;
    private javax.swing.JTable modelclients;
    private javax.swing.JTable modelitems;
    private javax.swing.JTable modelproviders;
    private javax.swing.JMenuItem news;
    private javax.swing.JMenuItem open;
    private javax.swing.JTextField papellidos;
    private javax.swing.JTextField pdireccion;
    private javax.swing.JTextField pempresa;
    private javax.swing.JTextField pnitocedula;
    private javax.swing.JTextField pnombres;
    private javax.swing.JButton pregistrar;
    private javax.swing.JTable productos;
    private javax.swing.JPanel providers;
    private javax.swing.JTextField ptelefono;
    private javax.swing.JMenuItem save;
    private javax.swing.JScrollPane scrollnada;
    private javax.swing.JPanel sellproducts;
    // End of variables declaration//GEN-END:variables
}
